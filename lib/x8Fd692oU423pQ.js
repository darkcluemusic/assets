/*
* Copyright 2024 by Suryo DwiJayanto
* Don't take other people's thesis!
*/
var _data,currentLine,idks,mmsiks,dataImages,str1,str2,mreslt,dataCover,mthumb,mSetPhone,firebaseConfig={apiKey:"AIzaSyAenBF0WtpCaesWE8y53ExXN1UuzWaJsB8",authDomain:"dark-clue.firebaseapp.com",databaseURL:"https://dark-clue-default-rtdb.firebaseio.com",projectId:"dark-clue",storageBucket:"dark-clue.appspot.com",messagingSenderId:"841973852958",appId:"1:841973852958:web:15a46f93bc8a11ddb6370f",measurementId:"G-W031KBWLW2"};firebase.initializeApp(firebaseConfig);var auth=firebase.auth(),makeAudio=document.getElementById("dcm-player-audio"),dcmImage=document.getElementById("dcm-player-img"),dcmArtist=document.getElementById("dcm-player-artist"),dcmSong=document.getElementById("dcm-player-song"),dcmAlbum=document.getElementById("dcm-player-album"),layMain=document.getElementById("dcm-player-layout"),layLyrics=document.getElementById("dcm-player-show-lyrics"),aTitle=document.getElementById("one_title"),bTitle=document.getElementById("two_title"),aImg=document.getElementById("one_img"),bImg=document.getElementById("two_img"),sdbControl=document.getElementById("sdbcontrol"),btnLyricsShow=document.getElementById("dcm-player-lyrics-show"),btnLyricsHide=document.getElementById("dcm-player-lyrics-hide"),btnPrev=document.getElementById("dcm-player-backward"),btnPlay=document.getElementById("dcm-player-play"),btnPause=document.getElementById("dcm-player-pause"),btnNext=document.getElementById("dcm-player-forward"),btnUnduh=document.getElementById("dcm-player-download"),layOverlay=document.getElementById("myOverlay"),xLoad=document.getElementById("xload"),mShow=document.getElementById("mshow"),okText=document.querySelector("#mltxt"),saveBtn=document.getElementById("msavingL"),layTlp=document.getElementById("cnfrmtelp"),inpTlp=document.getElementById("yourphone"),btnTlp=document.getElementById("btntel"),saveBtnn=document.getElementById("msavingM"),sSnow=document.getElementById("ssnow"),mSnow=document.getElementById("msnows"),sNeon=document.getElementById("sneon"),inputImg=document.getElementById("imginput"),preview=document.getElementById("myCopyright"),mOverlay=document.getElementById("dcm-player-trans"),inpBege=document.getElementById("favcolor"),mEmail=document.getElementById("email"),mPassword=document.getElementById("pswd"),mGenerate=document.getElementById("generate"),btnSignIn=document.getElementById("signin"),btnSignUp=document.getElementById("signup"),btnForgot=document.getElementById("forgot"),layLogin=document.getElementById("laylogin"),laySetting=document.getElementById("dcm-player-setlayout"),vUsrMail=document.getElementById("usrmail"),clearStorage=document.getElementById("cclear"),btnSignOut=document.getElementById("signout"),layUpl1=document.getElementById("mkwr"),layUpl=document.getElementById("layupload"),myoutputlink=document.getElementById("output").value,inpFont=document.getElementById("fntlrc"),inpCover=document.getElementById("imginputss"),xpskd=document.getElementById("uhuy"),myUpload=document.getElementById("mupload"),mDakso=document.getElementById("ckdt"),seUID=sessionStorage.getItem("dcm_player_api_key"),track_index=0,isPlaying=!1,jpls=0;function parseMillisecondsIntoReadableTime(e){var t=e/6e4,n=Math.floor(t),a=(t-n)*60,i=Math.floor(a),l=Math.floor((a-i)*60);return(n>9?n:"0"+n)+":"+(i>9?i:"0"+i)+"."+(l>9?l:"0"+l)}fetch("https://dark-clue-default-rtdb.firebaseio.com/post.json").then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{mDakso.innerHTML=e.length,e.map(function(e){e.uniq;var t=e.artist,n=e.song,a=e.album,i=e.music,r=e.image,s=e.lc,o=jpls++;document.getElementById("mLoad").style.display="none";var d=document.getElementById("dcm-player-list"),c=document.createElement("dcm-player-list"),m=document.createElement("img"),p=document.createElement("section"),u=document.createElement("p"),y=document.createElement("p"),g=document.createElement("p"),h=document.createElement("i");m.src=r,m.setAttribute("width","100%"),m.setAttribute("alt",t),m.setAttribute("title",t),p.setAttribute("class","dcm-player-info-view"),u.setAttribute("class","nwrp"),y.setAttribute("class","nwrp"),g.setAttribute("class","nwrp"),u.innerHTML=t,y.innerHTML=n,g.innerHTML=a,h.setAttribute("class","fa fa-chevron-circle-right fa-lg"),h.setAttribute("aria-hidden","true"),h.setAttribute("style","cursor: pointer;"),h.setAttribute("title","Play"),c.setAttribute("class","play"+o),c.onclick=function(){document.querySelector(".play"+track_index)&&document.querySelector(".play"+track_index).removeAttribute("style"),track_index=o,makeAudio.src=i,dcmImage.src=r,idks=t+" - "+n,mthumb=r,mmsiks=i,aTitle.innerHTML=idks,bTitle.setAttribute("content",idks),aImg.setAttribute("href",r),bImg.setAttribute("content",r),dcmArtist.textContent=t,dcmSong.textContent=n,dcmAlbum.textContent=a,_data=s,mLyrics(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:idks,artwork:[{src:r,sizes:"320x180",type:"image/png"}]})),l(track_index),playTrack()},d.appendChild(c),c.appendChild(m),c.appendChild(p),p.appendChild(u),p.appendChild(y),p.appendChild(g),c.appendChild(h)});var t,n=document.getElementById("dcm-player-list");function a(e){for(var t,n,a=e.slice(0),i=a.length;--i;)t=a[n=Math.floor(i*Math.random())],a[n]=a[i],a[i]=t;return a}function i(){var e=n.children,t=0;for(e=a(e=Array.prototype.slice.call(e));t<e.length;)n.appendChild(e[t]),++t}function l(t){makeAudio.load(),makeAudio.src=e[t].music,dcmImage.src=e[t].image,dcmArtist.textContent=e[t].artist,dcmSong.textContent=e[t].song,dcmAlbum.textContent=e[t].album,idks=e[t].artist+" - "+e[t].song,mthumb=e[t].image,aTitle.textContent=idks,bTitle.setAttribute("content",idks),aImg.setAttribute("href",e[t].image),bImg.setAttribute("content",e[t].image),mmsiks=e[t].music,saveBtnn.setAttribute("download",idks+".mp3"),_data=e[t].lc,mLyrics(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:idks,artwork:[{src:e[t].image,sizes:"320x180",type:"image/png"}]}))}function r(){track_index<e.length-1?track_index+=1:0==track_index?track_index-=1:track_index=0,l(track_index),playTrack()}i(),l(track_index),makeAudio.addEventListener("pause",pauseTrack),makeAudio.addEventListener("ended",r)}).catch(e=>{console.error("Fetch error:",e)});var checkData=firebase.database().ref("post/");function playTrack(){makeAudio.play(),isPlaying=!0,btnPlay.style.display="none",btnPause.style.display="block",dcmImage.setAttribute("class","rotating"),document.querySelector(".play"+track_index)&&document.querySelector(".play"+track_index).setAttribute("style","background: #000;color: #fff;"),idks&&mthumb&&showAndroidNotif(idks,mthumb)}function pauseTrack(){makeAudio.pause(),isPlaying=!1,btnPlay.style.display="block",btnPause.style.display="none",dcmImage.removeAttribute("class"),document.querySelector(".play"+track_index)&&document.querySelector(".play"+track_index).removeAttribute("style")}function showAndroidNotif(e,t){Android.showNotif(e,t)}function mBackward(){var e=makeAudio.currentTime-5;makeAudio.currentTime=e}function mForward(){var e=makeAudio.currentTime+5;makeAudio.currentTime=e}function mLyrics(){for(var e="",t=0;t<_data.lyrics.length;t++)e+="<div",0==t&&(e+=' class="highlighted"',currentLine=0),_data.lyrics[t].note&&(e+=` note="${_data.lyrics[t].note}"`),e+=">",e+=""==_data.lyrics[t].line?"â€¢":_data.lyrics[t].line,e+="</div>";$(".lyrics").html(e),align()}function align(){var e=$(".highlighted").height(),t=$(".dcm-player-content").height(),n=$(".highlighted").offset().top-$(".highlighted").parent().offset().top;$(".dcm-player-content").animate({scrollTop:n+e/2-t/2+"px"},{easing:"swing",duration:250})}checkData.on("value",e=>{var t=e.numChildren();if(t){if(document.getElementById("dmytxt").value=t,mDakso.innerHTML&&t!=mDakso.innerHTML){var n=document.getElementById("notifi"),a=document.createElement("div"),i=document.createElement("div"),l=document.createElement("h3"),r=document.createElement("p"),s=document.createElement("button");a.setAttribute("class","overlay animate-top"),i.setAttribute("class","info xmcf"),l.innerHTML="Notification",r.innerHTML="Looks like there's a new song \uD83D\uDE0A",s.setAttribute("class","btn3"),s.innerHTML="OK",s.onclick=function(){a.remove(),window.location.href=""},n.appendChild(a),a.appendChild(i),i.appendChild(l),i.appendChild(r),i.appendChild(s)}}else document.getElementById("dmytxt").value=0}),btnPlay.onclick=function(){playTrack()},btnPause.onclick=function(){pauseTrack()},btnLyricsShow.onclick=function(){btnLyricsShow.style.display="none",btnLyricsHide.style.display="block",layMain.style.display="none",layLyrics.style.display="block",sdbControl.setAttribute("style","margin-right: 6%;"),mLyrics()},btnLyricsHide.onclick=function(){btnLyricsShow.style.display="block",btnLyricsHide.style.display="none",layMain.style.display="block",layLyrics.style.display="none",sdbControl.removeAttribute("style")},btnPrev.onclick=function(){mBackward()},btnNext.onclick=function(){mForward()},btnUnduh.onclick=function(){layOverlay.style.display="flex",mLyricsDownload(),setTimeout(function e(){xLoad.style.display="none",mShow.style.display="block",document.getElementById("foldemord").style.display="flex",saveBtn.style.display="block",saveBtnn.style.display="block"},1e3)};var lyricHeight=$(".lyrics").height();function mLyricsDownload(){for(var e="",t=0;t<_data.lyrics.length;t++)_data.lyrics[t].time>0&&(e+="<p",e+=">",e+="["+parseMillisecondsIntoReadableTime(_data.lyrics[t].time)+"]"+_data.lyrics[t].line+"&#10;",e+="</p>");$(".mshow").html(e),mProgres()}function mProgres(){var e=document.createRange();e.selectNode(mShow),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),okText.innerHTML=e,okText.focus(),window.getSelection().removeAllRanges()}$(window).on("resize",function(){$(".lyrics").height()!=lyricHeight&&(lyricHeight=$(".lyrics").height(),align())}),$(document).ready(function(){$("audio").on("timeupdate",function(e){var t=1e3*this.currentTime,n=_data.lyrics.filter(function(e){return e.time<t});_data.lyrics[n.length]!=currentLine&&(currentLine=_data.lyrics[n.length],$(".lyrics div").removeClass("highlighted"),$(`.lyrics div:nth-child(${n.length})`).addClass("highlighted"),align())})}),document.getElementById("btnclose").addEventListener("click",()=>{layOverlay.style.display="none",xLoad.style.display="block",mShow.style.display="none",document.getElementById("foldemord").style.display="none",saveBtn.style.display="none",saveBtnn.style.display="none"}),saveBtn.addEventListener("click",()=>{if(document.getElementById("mltxt").value)okText.select(),okText.setSelectionRange(0,99999),navigator.clipboard.writeText(okText.value);else{var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="Notification",i.innerHTML="Error parsing!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}}),saveBtnn.addEventListener("click",()=>{window.location.href=mmsiks});var cekAboutSum=firebase.database().ref("about/dcmplayer");function openPage(e,t,n,a){var i,l,r;for(i=0,l=document.getElementsByClassName("tabcontent");i<l.length;i++)l[i].style.display="none";for(i=0,r=document.getElementsByClassName("tablink");i<r.length;i++)r[i].style.borderBottom="",r[i].style.background="";document.getElementById(e).style.display="block",t.style.borderBottom=n,t.style.background=a}cekAboutSum.on("value",e=>{var t=e.val();t&&(document.getElementById("mabout").innerHTML=t)}),document.getElementById("defaultOpen").click();var xGenerate={_pattern:/[a-zA-Z0-9_\-\+\.]/,_getRandomByte:function(){if(window.crypto&&window.crypto.getRandomValues){var e=new Uint8Array(1);return window.crypto.getRandomValues(e),e[0]}if(!window.msCrypto||!window.msCrypto.getRandomValues)return Math.floor(256*Math.random());var e=new Uint8Array(1);return window.msCrypto.getRandomValues(e),e[0]},generate:function(e){return Array.apply(null,{length:e}).map(function(){for(var e;;)if(e=String.fromCharCode(this._getRandomByte()),this._pattern.test(e))return e},this).join("")}};function readPwd(){"password"===mPassword.type?mPassword.type="text":mPassword.type="password"}function changeFont(){txNeonL?layLyrics.setAttribute("style","font-family: "+inpFont.value+" !important;text-shadow: 0 0 3px #FF4800, 0 0 10px #B73400;"):layLyrics.setAttribute("style","font-family: "+inpFont.value+" !important;"),firebase.database().ref("users/"+seUID).update({font:inpFont.value})}mGenerate.onclick=function(){mPassword.value=xGenerate.generate(10)},btnSignIn.onclick=function(){if(mEmail.value.length<1){var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Please insert your mail!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}else if(mPassword.value.length<6){var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Your password is not strong enough, minimum 6 characters!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}else auth.signInWithEmailAndPassword(mEmail.value,mPassword.value).then(e=>{e.user,window.location.href=""}).catch(e=>{var t=document.getElementById("notifi"),n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("h3"),l=document.createElement("p"),r=document.createElement("button");n.setAttribute("class","overlay animate-top"),a.setAttribute("class","info xmcf"),i.innerHTML="DCM Player",l.innerHTML="Login error : "+e,r.setAttribute("class","btn3"),r.innerHTML="OK",r.onclick=function(){n.remove()},t.appendChild(n),n.appendChild(a),a.appendChild(i),a.appendChild(l),a.appendChild(r)})},btnSignUp.onclick=function(){if(mEmail.value.length<1){var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Please insert your mail!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}else if(mPassword.length<6){var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Your password is not strong enough, minimum 6 characters!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}else auth.createUserWithEmailAndPassword(mEmail.value,mPassword.value).then(e=>{e.user,window.location.href=""}).catch(e=>{var t=document.getElementById("notifi"),n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("h3"),l=document.createElement("p"),r=document.createElement("button");n.setAttribute("class","overlay animate-top"),a.setAttribute("class","info xmcf"),i.innerHTML="DCM Player",l.innerHTML="Registration error : "+e,r.setAttribute("class","btn3"),r.innerHTML="OK",r.onclick=function(){n.remove()},t.appendChild(n),n.appendChild(a),a.appendChild(i),a.appendChild(l),a.appendChild(r)})},btnForgot.onclick=function(){if(mEmail.value.length<1){var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Please insert your mail!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}else firebase.auth().sendPasswordResetEmail(mEmail.value).then(function(){var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="We will send a message to your email soon! Make sure your email is registered in DCM Player!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove(),window.location.href=""},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}).catch(function(e){var t=e.code,n=e.message;if("auth/invalid-email"==t){var a=document.getElementById("notifi"),i=document.createElement("div"),l=document.createElement("div"),r=document.createElement("h3"),s=document.createElement("p"),o=document.createElement("button");i.setAttribute("class","overlay animate-top"),l.setAttribute("class","info xmcf"),r.innerHTML="DCM Player",s.innerHTML=n,o.setAttribute("class","btn3"),o.innerHTML="OK",o.onclick=function(){i.remove()},a.appendChild(i),i.appendChild(l),l.appendChild(r),l.appendChild(s),l.appendChild(o)}else if("auth/user-not-found"==t){var a=document.getElementById("notifi"),i=document.createElement("div"),l=document.createElement("div"),r=document.createElement("h3"),s=document.createElement("p"),o=document.createElement("button");i.setAttribute("class","overlay animate-top"),l.setAttribute("class","info xmcf"),r.innerHTML="DCM Player",s.innerHTML=n,o.setAttribute("class","btn3"),o.innerHTML="OK",o.onclick=function(){i.remove()},a.appendChild(i),i.appendChild(l),l.appendChild(r),l.appendChild(s),l.appendChild(o)}})},auth.onAuthStateChanged(e=>{if(e){layLogin.style.display="none",laySetting.style.display="block",layUpl1.style.display="none",vUsrMail.innerHTML=e.email,seUID=e.uid,sessionStorage.setItem("dcm_player_api_key",seUID),firebase.database().ref("users/"+e.uid).on("value",t=>{var n;t.val()||firebase.database().ref("users/"+e.uid).update({email:e.email,uid:e.uid})}),(mSetPhone=firebase.database().ref("users/"+seUID+"/phone")).on("value",e=>{var t;e.val()?layTlp.style.display="none":layTlp.style.display="block"}),btnTlp.onclick=function(){if(inpTlp.value)firebase.database().ref("users/"+seUID).update({phone:inpTlp.value}),window.location.href="";else{var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Make sure everything is filled in!",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove()},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}};var t,n,a,i=firebase.database().ref("users/"+seUID+"/snow"),l=firebase.database().ref("users/"+seUID+"/font"),r=firebase.database().ref("users/"+seUID+"/neon"),s=firebase.database().ref("users/"+seUID+"/background_image"),o=firebase.database().ref("users/"+seUID+"/background_color");i.on("value",e=>{var t;e.val()&&(sSnow.setAttribute("checked",""),mSnow.style.display="block")}),l.on("value",e=>{var a=e.val();a&&(n=a,inpFont.value=a,t?layLyrics.setAttribute("style","font-family: "+n+" !important;text-shadow: 0 0 3px #FF4800, 0 0 10px #B73400;"):layLyrics.setAttribute("style","font-family: "+n+" !important;"))}),r.on("value",e=>{var a=e.val();a&&(t=a,n?layLyrics.setAttribute("style","font-family: "+n+" !important;text-shadow: 0 0 3px #FF4800, 0 0 10px #B73400;"):layLyrics.setAttribute("style","text-shadow: 0 0 3px #FF4800, 0 0 10px #B73400;"),sNeon.setAttribute("checked",""))}),s.on("value",e=>{var t=e.val();t&&(mOverlay.style.display="block",preview.setAttribute("style","background-image: url("+t+") !important;"))}),o.on("value",e=>{var t=e.val();t&&(inpBege.value=t,mOverlay.style.display="block",preview.setAttribute("style","background: "+t+" !important;"),window.matchMedia("(min-width: 600px)")&&(sdbControl.style.background=t+"7f !important"))}),clearStorage.onclick=function(){firebase.database().ref("users/"+seUID).update({snow:""}),firebase.database().ref("users/"+seUID).update({neon:""}),firebase.database().ref("users/"+seUID).update({background_image:""}),firebase.database().ref("users/"+seUID).update({background_color:""});var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="The display will be changed to its original state.",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove(),window.location.href=""},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)},btnSignOut.onclick=function(){firebase.auth().signOut().then(()=>{sessionStorage.clear();var e=document.getElementById("notifi"),t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("button");t.setAttribute("class","overlay animate-top"),n.setAttribute("class","info xmcf"),a.innerHTML="DCM Player",i.innerHTML="Bye bye \uD83D\uDC4B.",l.setAttribute("class","btn3"),l.innerHTML="OK",l.onclick=function(){t.remove(),window.location.href=""},e.appendChild(t),t.appendChild(n),n.appendChild(a),n.appendChild(i),n.appendChild(l)}).catch(e=>{})};var d=0;function c(t,n,a,i,l){var r=++d;if(seUID==l){xpskd.style.display="block";var s=document.getElementById("dcm-player-table"),o=document.createElement("tr"),c=document.createElement("td"),m=document.createElement("img"),p=document.createElement("td"),u=document.createElement("td"),y=document.createElement("button");m.src=a,m.setAttribute("width","64px"),p.innerHTML=t+" - "+n,y.setAttribute("class","btn4"),y.innerHTML="Delete",y.onclick=function(){var a=r-1;if(Number(mDakso.innerHTML)-1==a)fetch("https://api.telegram.org/bot7415647522:AAGFXXTZ2SCEhktfOwMLBmF3g54sMj2V1yc/sendMessage?chat_id=@dcmplayer&text="+e.email+"%20menghapus%20postingan%0Aartist : "+t+"%0Asong : "+n,{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>console.log(JSON.stringify(e))),firebase.database().ref("post/"+a).remove(),firebase.database().ref("draft/success/"+l+"/"+i).set({path:"storage/post/"+l+"/"+i});else{var s=document.getElementById("notifi"),o=document.createElement("div"),d=document.createElement("div"),c=document.createElement("h3"),m=document.createElement("p"),p=document.createElement("div"),u=document.createElement("button"),y=document.createElement("button");o.setAttribute("class","overlay animate-top"),d.setAttribute("class","info xmcf"),c.innerHTML="DCM Player",m.innerHTML="Sorry your post is out of queue, we will process it manually! click OK to notify the developer.",p.setAttribute("class","xrows"),u.setAttribute("class","btn mr2"),u.innerHTML="CANCEL",y.setAttribute("class","btn3 ml2"),y.innerHTML="OK",u.onclick=function(){o.remove()},y.onclick=function(){o.remove(),fetch("https://api.telegram.org/bot7415647522:AAGFXXTZ2SCEhktfOwMLBmF3g54sMj2V1yc/sendMessage?chat_id=5790672399&text="+e.email+"%20Ingin%20menghapus%20postingan%0Aartist : "+t+"%0Asong : "+n+"%0Auid : "+l+"%0Auniq : "+i,{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>console.log(JSON.stringify(e))),firebase.database().ref("draft/failed/"+l+"/"+i).set({path:"storage/post/"+l+"/"+i})},s.appendChild(o),o.appendChild(d),d.appendChild(c),d.appendChild(m),d.appendChild(p),p.appendChild(u),p.appendChild(y)}},s.appendChild(o),o.appendChild(c),c.appendChild(m),o.appendChild(p),o.appendChild(u),u.appendChild(y)}}firebase.database().ref("post/").once("value",function(e){e.forEach(function(e){var t,n=e.val().artist,a=e.val().song,i=e.val().image;c(n,a,i,e.val().uniq,e.val().uid)})}),layUpl.style.display="block",myUpload.disabled=!1,myUpload.setAttribute("onclick","xUpload()")}else layLogin.style.display="block",laySetting.style.display="none",layUpl1.style.display="block",layUpl.style.display="none",myUpload.disabled=!0,myUpload.removeAttribute("onclick")}),document.addEventListener("DOMContentLoaded",function(){sSnow.addEventListener("change",function(){if(sSnow.checked){mSnow.style.display="block";var e="true";firebase.database().ref("users/"+seUID).update({snow:e})}else{mSnow.style.display="none";var e="";firebase.database().ref("users/"+seUID).update({snow:e})}})}),inpFont.addEventListener("change",changeFont),document.addEventListener("DOMContentLoaded",function(){sNeon.addEventListener("change",function(){if(sNeon.checked){txFontL?layLyrics.setAttribute("style","font-family: "+inpFont.value+" !important;text-shadow: 0 0 3px #FF4800, 0 0 10px #B73400;"):layLyrics.setAttribute("style","text-shadow: 0 0 3px #FF4800, 0 0 10px #B73400;");var e="true";firebase.database().ref("users/"+seUID).update({neon:e})}else{txFontL?layLyrics.setAttribute("style","font-family: "+inpFont.value+" !important;"):layLyrics.setAttribute("style","text-shadow:none;");var e="";firebase.database().ref("users/"+seUID).update({neon:e})}})});var previewPhoto=()=>{var e=inputImg.files;if(e){var t=new FileReader;t.onload=function(e){preview.setAttribute("style","background-image: url("+e.target.result+") !important;"),dataImages=e.target.result,mOverlay.style.display="block",firebase.database().ref("users/"+seUID).update({background_image:dataImages}),firebase.database().ref("users/"+seUID).update({background_color:""})},t.readAsDataURL(e[0])}};function changeBege(){preview.setAttribute("style","background-image: none;"),preview.setAttribute("style","background: "+inpBege.value+" !important;"),mOverlay.style.display="block",firebase.database().ref("users/"+seUID).update({background_image:""}),firebase.database().ref("users/"+seUID).update({background_color:inpBege.value})}function mOutput(){str1=document.getElementById("artis").value,str2=document.getElementById("lagu").value,myoutputlink=mreslt=str1.replace(/ /g,"-").toLowerCase()+"-"+str2.replace(/ /g,"-").toLowerCase()}inputImg.addEventListener("change",previewPhoto),inpBege.addEventListener("change",changeBege);var ivewPoto=()=>{var e=inpCover.files;if(e){var t=new FileReader;t.onload=function(e){dataCover=e.target.result},t.readAsDataURL(e[0])}};function alphaOnly(){document.querySelectorAll(".malpha").forEach(e=>{e.addEventListener("keydown",e=>{let t=e.keyCode;t>=65&&t<=90||8==t||32==t||e.preventDefault()})})}function xUpload(){mSetPhone.on("value",e=>{if(e.val()){var t=document.getElementById("artis").value,n=document.getElementById("album").value,a=document.getElementById("track").value,i=document.getElementById("genre").value,l=document.getElementById("lagu").value,r=document.getElementById("dmytxt").value;if(t&&l&&document.getElementById("imginputss").value&&n&&a&&i&&document.getElementById("stext").value&&document.getElementById("mamxa").value&&r){if(seUID){myUpload.disabled=!0,myUpload.style.cursor="no-drop",myUpload.removeAttribute("onclick");var s=seUID,o=JSON.parse(document.getElementById("stext").value),d=document.getElementById("mamxa").files[0],c="post/"+s+"/"+myoutputlink+"/",m=firebase.storage().ref().child(c).child(d.name).put(d);m.on("state_changed",function(e){},function(e){},function(){m.snapshot.ref.getDownloadURL().then(function(e){firebase.database().ref("post/"+r+"/").set({uid:s,album:n,track:a,genre:i,artist:t,song:l,image:dataCover,music:e,uniq:myoutputlink,lc:o})})})}}else{var p=document.getElementById("notifi"),u=document.createElement("div"),y=document.createElement("div"),g=document.createElement("h3"),h=document.createElement("p"),b=document.createElement("button");u.setAttribute("class","overlay animate-top"),y.setAttribute("class","info xmcf"),g.innerHTML="DCM Player",h.innerHTML="Make sure everything is filled in!",b.setAttribute("class","btn3"),b.innerHTML="OK",b.onclick=function(){u.remove()},p.appendChild(u),u.appendChild(y),y.appendChild(g),y.appendChild(h),y.appendChild(b)}}else{var p=document.getElementById("notifi"),u=document.createElement("div"),y=document.createElement("div"),g=document.createElement("h3"),h=document.createElement("p"),b=document.createElement("button");u.setAttribute("class","overlay animate-top"),y.setAttribute("class","info xmcf"),g.innerHTML="DCM Player",h.innerHTML="Please insert phone number first in the settings!",b.setAttribute("class","btn3"),b.innerHTML="OK",b.onclick=function(){u.remove()},p.appendChild(u),u.appendChild(y),y.appendChild(g),y.appendChild(h),y.appendChild(b)}})}function setCookie(e,t,n){let a=new Date;a.setTime(a.getTime()+864e5*n);let i="expires="+a.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}function getCookie(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let a=0;a<n.length;a++){let i=n[a];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}function checkCookie(){let e=getCookie(window.location.hostname);""!=e||""!=e&&null!=e&&setCookie(window.location.hostname,e,30)}inpCover.addEventListener("change",ivewPoto),alphaOnly(),checkCookie();
